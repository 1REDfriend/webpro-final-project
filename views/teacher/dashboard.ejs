<%- include('../layouts/header') %>

    <h2 class="mb-4">แผงควบคุมอาจารย์</h2>

    <div class="card">
        <h3>ข้อมูลส่วนตัว</h3>
        <p><strong>ชื่อ-นามสกุล:</strong>
            <%= teacher.full_name %>
        </p>
        <p><strong>สถานะ:</strong> บุคลากรครู (Teacher)</p>
        <p><strong>ห้องเรียนประจำชั้น (Homeroom):</strong>
            <%= homeroom ? homeroom : 'ยังไม่ได้ระบุ' %>
        </p>

        <form action="/teacher/homeroom" method="POST"
            style="margin-top: 1rem; display: flex; gap: 1rem; align-items: center;">
            <select name="classroom_id" class="form-control" style="width: auto;" required>
                <option value="">เลือกห้องเรียนประจำชั้น</option>
                <% classrooms.forEach(c=> { %>
                    <option value="<%= c.id %>" <%=teacher.homeroom_classroom_id===c.id ? 'selected' : '' %>><%= c.name
                            %>
                    </option>
                    <% }); %>
            </select>
            <button type="submit" class="btn btn-secondary">บันทึก</button>
        </form>
    </div>

    <div class="card mb-4">
        <h3>วิชาที่สอน</h3>
        <ul>
            <% subjects.forEach(sub=> { %>
                <li>
                    <%= sub.code %> - <%= sub.name %> (<%= sub.credit %> หน่วยกิต)
                </li>
                <% }) %>
        </ul>
        <h4 style="margin-top: 1rem;">เพิ่มรายวิชาที่สอน</h4>
        <form action="/teacher/subjects" method="POST" style="display: flex; gap: 1rem; align-items: flex-end;">
            <div class="form-group" style="margin: 0;">
                <label>รหัสวิชา</label>
                <input type="text" name="code" class="form-control" required>
            </div>
            <div class="form-group" style="margin: 0;">
                <label>ชื่อวิชา</label>
                <input type="text" name="name" class="form-control" required>
            </div>
            <div class="form-group" style="margin: 0;">
                <label>หน่วยกิต</label>
                <input type="number" step="0.5" name="credit" class="form-control" style="width: 100px;" required>
            </div>
            <button type="submit" class="btn btn-primary">เพิ่มรายวิชา</button>
        </form>
    </div>

    <div class="grid-2">
        <div class="card">
            <h3>จัดการการเรียนการสอน</h3>
            <p>บันทึกคะแนนสอบและพฤติกรรมนักเรียน</p>
            <a href="/teacher/classes" class="btn btn-primary">จัดการห้องเรียน / ลงคะแนน</a>
        </div>
        <div class="card">
            <h3>ยื่นคำร้อง</h3>
            <p>ส่งคำร้องถึงฝ่ายธุรการ/บริหาร</p>
            <a href="/teacher/requests" class="btn btn-primary">ระบบคำร้อง</a>
        </div>
    </div>

    <%- include('../layouts/footer') %>